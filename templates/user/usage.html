{% extends "base.html" %}
{% block title %}My Usage{% endblock %}

{% block content %}
<h2>{{_("My Usage")}}</h2>
<p class="muted">{% trans user=current_user.username %}Signed in as <b>{{ user }}</b>{% endtrans %}</p>

<div class="card">
    <div class="tabs">
        <a class="{{ 'on' if view=='detail' else '' }}"
            href="{{ url_for('user.my_usage', before=before, view='detail') }}">Detailed</a>
        <a class="{{ 'on' if view=='aggregate' else '' }}"
            href="{{ url_for('user.my_usage', before=before, view='aggregate') }}">Aggregate</a>
        <a class="{{ 'on' if view=='trend' else '' }}"
            href="{{ url_for('user.my_usage', view='trend', year=year) }}">Trend & Monthly</a>
        <a class="{{ 'on' if view=='billed' else '' }}"
            href="{{ url_for('user.my_usage', view='billed') }}">Invoices</a>
    </div>
</div>

{% if view in ['detail','aggregate'] %}
<div class="card">
    <h3>Filter</h3>
    <form method="get" class="grid">
        <div>
            <label>Jobs completed before
                <input type="date" name="before" value="{{ before }}">
            </label>
            <input type="hidden" name="view" value="{{ view }}">
        </div>
        <div><label>&nbsp;<button type="submit">Fetch</button></label></div>
    </form>
    {% if data_source %}
    <p class="muted">Source: <b>{{ data_source }}</b>{% if notes and notes|length>0 %} —
        {{ notes|join(' | ') }}{% endif %}</p>
    {% endif %}
</div>
{% endif %}

{% if view == 'detail' %}
{% if rows and rows|length>0 %}
<div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;">
        <h3>Your Jobs</h3>
        <div>
            <a href="{{ url_for('user.my_usage_csv', before=before) }}"><button type="button">Download CSV</button></a>
        </div>
    </div>

    <p class="muted" style="margin-top:.5rem">
        <span class="chip">Jobs: {{ rows|length }}</span>
        <span class="chip">Total cost: ฿{{ '%.2f'|format(total_cost) }}</span>
    </p>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>JobID</th>
                    <th>Elapsed</th>
                    <th>End</th>
                    <th>State</th>
                    <th>CPU core-hrs</th>
                    <th>GPU (count)</th>
                    <th>GPU hrs</th>
                    <th>Mem (GB alloc)</th>
                    <th>Mem GB-hrs <small>(used)</small></th>
                    <th>Mem GB-hrs <small>(alloc)</small></th>
                    <th>Tier</th>
                    <th>Cost (฿)</th>
                </tr>
            </thead>
            <tbody>
                {% for r in rows %}
                <tr>
                    <td>{{ r['JobID'] }}</td>
                    <td>{{ r['Elapsed'] }}</td>
                    <td>{{ r['End']|dt_local }}</td>
                    <td>{{ r['State'] }}</td>
                    <td>{{ '%.2f'|format(r['CPU_Core_Hours']) }}</td>
                    <td>{{ r['GPU_Count'] }}</td>
                    <td>{{ '%.2f'|format(r['GPU_Hours']) }}</td>
                    <td>{{ '%.2f'|format(r['Memory_GB']) }}</td>
                    <td>{{ '%.2f'|format(r['Mem_GB_Hours_Used']) }}</td>
                    <td>{{ '%.2f'|format(r['Mem_GB_Hours_Alloc']) }}</td>
                    <td>{{ r['tier']|upper }}</td>
                    <td>฿{{ '%.2f'|format(r['Cost (฿)']) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Raw collapsible -->
    <details class="raw" style="margin-top:.75rem">
        <summary>Show raw fetched data (parents + steps)</summary>
        {% if raw_cols and raw_rows %}
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>{% for c in raw_cols %}<th class="{{ header_classes.get(c,'') }}">{{ c }}</th>{% endfor %}</tr>
                </thead>
                <tbody>
                    {% for r in raw_rows %}
                    <tr>{% for c in raw_cols %}<td>{{ r.get(c) }}</td>{% endfor %}</tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <p class="muted" style="margin-top:.25rem">Showing first {{ raw_rows|length }} row(s).</p>
        {% else %}
        <p class="muted">No raw rows.</p>
        {% endif %}
    </details>
</div>
{% else %}
<p class="muted">No jobs for the selected period.</p>
{% endif %}

{% elif view == 'aggregate' %}
{% if agg_rows and agg_rows|length>0 %}
<div class="card">
    <table>
        <thead>
            <tr>
                <th>Jobs</th>
                <th>CPU core-hrs</th>
                <th>GPU hrs</th>
                <th>Mem GB-hrs (used)</th>
                <th>Total Cost (฿)</th>
            </tr>
        </thead>
        <tbody>
            {% for r in agg_rows %}
            <tr>
                <td>{{ r['jobs'] }}</td>
                <td>{{ '%.2f'|format(r['CPU_Core_Hours']) }}</td>
                <td>{{ '%.2f'|format(r['GPU_Hours']) }}</td>
                <td>{{ '%.2f'|format(r['Mem_GB_Hours_Used']) }}</td>
                <td>฿{{ '%.2f'|format(r['Cost (฿)']) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p class="muted">No jobs for the selected period.</p>
{% endif %}

{% elif view == 'trend' %}
<div class="card">
    <h3>Year-to-date trend (aggregated)</h3>
    <form method="get" class="grid" style="grid-template-columns: 1fr auto; gap: .5rem 1rem;">
        <div>
            <label>Year
                <input type="number" min="2000" max="2100" step="1" name="year" value="{{ year or current_year }}">
            </label>
            <input type="hidden" name="view" value="trend">
        </div>
        <div style="align-self:end;"><button type="submit">Apply</button></div>
    </form>

    {% if monthly_agg and monthly_agg|length>0 %}
    <table style="margin-top:.5rem">
        <thead>
            <tr>
                <th>Month</th>
                <th>Jobs</th>
                <th>CPU core-hrs</th>
                <th>GPU hrs</th>
                <th>Mem GB-hrs (used)</th>
                <th>Total Cost (฿)</th>
            </tr>
        </thead>
        <tbody>
            {% for r in monthly_agg %}
            <tr>
                <td>
                    <a
                        href="{{ url_for('user.my_usage', view='trend', year=year, month=r['month']) }}">{{ "%02d"|format(r['month']) }}</a>
                </td>
                <td>{{ r['jobs'] }}</td>
                <td>{{ '%.2f'|format(r['CPU_Core_Hours']) }}</td>
                <td>{{ '%.2f'|format(r['GPU_Hours']) }}</td>
                <td>{{ '%.2f'|format(r['Mem_GB_Hours_Used']) }}</td>
                <td>฿{{ '%.2f'|format(r['Cost (฿)']) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p class="muted" style="margin-top:.25rem"><span class="chip">Year total:
            ฿{{ '%.2f'|format(year_total or 0) }}</span></p>
    {% else %}
    <p class="muted">No usage for this year.</p>
    {% endif %}
</div>

{% if month and month_detail_rows %}
<div class="card" style="margin-top:1rem">
    <h3>Details for {{ year }}-{{ "%02d"|format(month|int) }}</h3>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>JobID</th>
                    <th>Elapsed</th>
                    <th>End</th>
                    <th>State</th>
                    <th>CPU core-hrs</th>
                    <th>GPU (count)</th>
                    <th>GPU hrs</th>
                    <th>Mem (GB alloc)</th>
                    <th>Mem GB-hrs <small>(used)</small></th>
                    <th>Mem GB-hrs <small>(alloc)</small></th>
                    <th>Tier</th>
                    <th>Cost (฿)</th>
                </tr>
            </thead>
            <tbody>
                {% for r in month_detail_rows %}
                <tr>
                    <td>{{ r['JobID'] }}</td>
                    <td>{{ r['Elapsed'] }}</td>
                    <td>{{ r['End']|dt_local }}</td>
                    <td>{{ r['State'] }}</td>
                    <td>{{ '%.2f'|format(r['CPU_Core_Hours']) }}</td>
                    <td>{{ r['GPU_Count'] }}</td>
                    <td>{{ '%.2f'|format(r['GPU_Hours']) }}</td>
                    <td>{{ '%.2f'|format(r['Memory_GB']) }}</td>
                    <td>{{ '%.2f'|format(r['Mem_GB_Hours_Used']) }}</td>
                    <td>{{ '%.2f'|format(r['Mem_GB_Hours_Alloc']) }}</td>
                    <td>{{ r['tier']|upper }}</td>
                    <td>฿{{ '%.2f'|format(r['Cost (฿)']) }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    <div class="muted" style="margin-top:.5rem">
        <span class="chip">Jobs: {{ month_detail_rows|length }}</span>
        <span class="chip">CPU core-hrs: {{ '%.2f'|format(tot_cpu_m or 0) }}</span>
        <span class="chip">GPU hrs: {{ '%.2f'|format(tot_gpu_m or 0) }}</span>
        <span class="chip">Mem GB-hrs (used): {{ '%.2f'|format(tot_mem_m or 0) }}</span>
        <span class="chip">Total: ฿{{ '%.2f'|format(month_total or 0) }}</span>
    </div>
</div>
{% endif %}

{% elif view == 'billed' %}
<h4>Pending (unpaid) invoices</h4>
{% if my_pending_receipts and my_pending_receipts|length>0 %}
<p class="muted"><span class="chip">Total: ฿{{ '%.2f'|format(sum_pending) }}</span></p>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Period</th>
            <th>Total (฿)</th>
            <th>Created</th>
            <th>Invoice</th>
        </tr>
    </thead>
    <tbody>
        {% for r in my_pending_receipts %}
        <tr>
            <td><a href="{{ url_for('user.view_receipt', rid=r['id']) }}">#{{ r['id'] }}</a></td>
            <td>{{ r['start']|dt_local }} → {{ r['end']|dt_local }}</td>
            <td>฿{{ '%.2f'|format(r['total']) }}</td>
            <td>{{ r['created_at']|dt_local }}</td>
            <td><a class="btn" href="{{ url_for('user.receipt_pdf', rid=r['id']) }}">Download PDF</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p class="muted">Nothing pending 🎉</p>
{% endif %}

<h4 style="margin-top:1rem">Paid invoices</h4>
{% if my_paid_receipts and my_paid_receipts|length>0 %}
<p class="muted"><span class="chip">Total: ฿{{ '%.2f'|format(sum_paid) }}</span></p>
<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Period</th>
            <th>Total (฿)</th>
            <th>Paid at</th>
            <th>Invoice</th>
        </tr>
    </thead>
    <tbody>
        {% for r in my_paid_receipts %}
        <tr>
            <td><a href="{{ url_for('user.view_receipt', rid=r['id']) }}">#{{ r['id'] }}</a></td>
            <td>{{ r['start']|dt_local }} → {{ r['end']|dt_local }}</td>
            <td>฿{{ '%.2f'|format(r['total']) }}</td>
            <td>{{ r['paid_at']|dt_local or '—' }}</td>
            <td>
                <a class="btn" href="{{ url_for('admin.admin_receipt_pdf', rid=r['id']) }}">PDF</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endif %}
{% else %}
<p class="muted">No paid invoices yet.</p>
{% endif %}

<!-- ===== Legend / transparency (unchanged styles) ===== -->
<style>
    .hl-primary {
        font-weight: 700;
        text-decoration: underline;
        font-style: italic;
    }

    .hl-fallback1 {
        font-weight: 700;
        text-decoration: underline;
    }

    .hl-fallback2 {
        font-weight: 700;
        font-style: italic;
    }

    .table-wrap {
        position: relative;
        max-height: 60vh;
        overflow: auto;
        border: 1px solid var(--bd);
        border-radius: 10px;
    }

    .table-wrap thead th {
        position: sticky;
        top: 0;
        z-index: 2;
        background: #f8fafc;
        box-shadow: 0 1px 0 var(--bd);
    }

    .chip {
        display: inline-block;
        padding: .1rem .4rem;
        border-radius: .6rem;
        background: #efefef;
        margin-right: .25rem;
    }

    .tabs {
        display: flex;
        gap: .5rem;
    }

    .tabs a {
        padding: .25rem .5rem;
        border-radius: .5rem;
        text-decoration: none;
        border: 1px solid var(--bd);
    }

    .tabs a.on {
        background: #eef2ff;
        border-color: #c7d2fe;
    }

    details.raw {
        margin-top: .75rem;
    }

    .fn {
        font-size: .8em;
        margin-left: .25rem;
        color: var(--muted);
        text-decoration: none;
    }

    .fn-var {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
</style>

<details id="billing-transparency" class="collapsible">
    <summary>
        <h2 style="display:inline;">How We Compute Usage &amp; Billing</h2>
        <small class="muted" style="margin-left:.5rem;">(Transparency Note)</small>
    </summary>

    <div class="collapsible-body">
        <hr>
        <h3>Data Collection</h3>
        <ul>
            <li>We query <code>sacct</code> with: <code>--parsable2</code>, <code>-S</code> (start date),
                <code>-E</code>
                (end date), <code>-L</code>, and a fixed set of fields (see example below) [1].</li>
            <li>We include terminal states such as <code>COMPLETED</code>, <code>FAILED</code>, <code>CANCELLED</code>,
                <code>TIMEOUT</code>, <code>PREEMPTED</code>, <code>NODE_FAIL</code>, <code>BOOT_FAIL</code>,
                <code>DEADLINE</code> [1].
            </li>
            <li>If your account is permitted (per Slurm’s <code>PrivateData</code>/privacy configuration), we add
                <code>--allusers</code>; otherwise, we fetch only your own jobs [1],[2].
            </li>
        </ul>

        <h3>Fields We Use</h3>
        <p>We request and interpret the following Slurm fields:</p>
        <table class="table table-sm">
            <thead>
                <tr>
                    <th>Field</th>
                    <th>Meaning (per Slurm)</th>
                    <th>How We Use It</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Elapsed</code></td>
                    <td>Wall-clock run time for the job/step, format <em>[days-]HH:MM:SS[.ms]</em> [1].</td>
                    <td>Converted to hours (<em>elapsed_h</em>). Used with allocated resources to infer time-based
                        usage.
                    </td>
                </tr>
                <tr>
                    <td><code>TotalCPU</code></td>
                    <td>Sum of user+system CPU time across tasks for the job/step (may exceed elapsed due to
                        parallelism)
                        [1].</td>
                    <td>Preferred CPU usage signal. We sum step <code>TotalCPU</code> (excluding the <code>.batch</code>
                        wrapper) when available.</td>
                </tr>
                <tr>
                    <td><code>CPUTime</code> / <code>CPUTimeRAW</code></td>
                    <td>CPU time in formatted/seconds form respectively [1].</td>
                    <td>Fallback for CPU usage when <code>TotalCPU</code> is missing or zero (we use
                        <code>CPUTimeRAW/3600</code>).
                    </td>
                </tr>
                <tr>
                    <td><code>ReqTRES</code>, <code>AllocTRES</code></td>
                    <td>Requested/allocated Trackable RESources (e.g., <code>cpu=</code>, <code>mem=</code>,
                        <code>gres/gpu=</code>) [3].
                    </td>
                    <td>Used to obtain CPU count, GPU count, and memory capacity for allocation-based calculations and
                        fallbacks.</td>
                </tr>
                <tr>
                    <td><code>AveRSS</code>, <code>MaxRSS</code></td>
                    <td>Average / maximum resident set size (per step/job aggregation) [1].</td>
                    <td><code>AveRSS</code> per step × step elapsed gives “used memory GB-hours”. If unavailable, we
                        fall
                        back to allocated memory.</td>
                </tr>
                <tr>
                    <td>Meta: <code>User</code>, <code>JobID</code>, <code>JobName</code>, <code>End</code>,
                        <code>State</code>, <code>ExitCode</code>, <code>NodeList</code>, <code>AllocNodes</code>
                    </td>
                    <td>Identification, status, and auditability fields [1],[4].</td>
                    <td>Used for grouping parent/steps, filtering, and traceability (not priced directly).</td>
                </tr>
            </tbody>
        </table>

        <h3>Billing Formula</h3>
        <p>The per-job (parent) cost is computed as:</p>
        <pre><code>Cost = (CPU_core_hours × cpu_rate)
             + (GPU_hours × gpu_rate)
             + (Memory_GB_hours_used × mem_rate)</code></pre>
        <ul>
            <li><strong>CPU_core_hours</strong>:
                <ul>
                    <li>Primary: sum of <code>TotalCPU</code> (hours) over job steps (excluding <code>.batch</code>).
                    </li>
                    <li>Fallbacks: sum of <code>CPUTimeRAW</code> over steps; else parent <code>TotalCPU</code>; else
                        <code>AllocCPUS × elapsed_h</code>.
                    </li>
                </ul>
            </li>
            <li><strong>GPU_hours</strong>: <code>(GPU count from AllocTRES or ReqTRES) × elapsed_h</code>.</li>
            <li><strong>Memory_GB_hours_used</strong>:
                <ul>
                    <li>Primary: sum over steps of <code>AveRSS(GB) × step_elapsed_h</code>.</li>
                    <li>Fallback: <code>(allocated memory GB) × elapsed_h</code>.</li>
                </ul>
            </li>
            <li>Rates (<code>cpu_rate</code>, <code>gpu_rate</code>, <code>mem_rate</code>) are published per tier and
                versioned in this service.</li>
        </ul>

        <h3>FAQ</h3>
        <dl>
            <dt>Why are some values zero?</dt>
            <dd>
                If <code>TotalCPU</code> and <code>CPUTimeRAW</code> are not reported for steps and allocations are also
                unavailable,
                CPU may evaluate to 0 until a fallback applies. Similarly, if <code>AveRSS</code> is missing and no
                <code>mem=</code> is present in TRES, memory usage may appear as 0. See field fallbacks above [1],[3].
            </dd>

            <dt>What are job “steps” and why do they matter?</dt>
            <dd>
                Slurm records a parent job row plus one or more step rows (e.g., <code>12345.batch</code>,
                <code>12345.0</code>, <code>12345.1</code>).
                We group steps under their parent and aggregate usage so the parent’s cost includes all step activity
                [1],[4].
            </dd>

            <dt>Why exclude <code>.batch</code> from CPU sums?</dt>
            <dd>
                The <code>.batch</code> step is a wrapper and can duplicate accounting; excluding it avoids double
                counting.
                This is a common operational choice informed by how Slurm reports step accounting [1].
            </dd>

            <dt>Why can CPU usage exceed elapsed time?</dt>
            <dd>
                <code>TotalCPU</code> represents cumulative CPU time across concurrent tasks; in parallel workloads it
                can
                exceed wall-clock elapsed (that is expected) [1].
            </dd>

            <dt>What about time zones and date filters?</dt>
            <dd>
                <code>End</code> timestamps are interpreted in the cluster’s local time. The requested end date includes
                jobs finishing on that date (up to 23:59:59) [1],[2].
            </dd>
        </dl>

        <h3>Worked Example (Made-Up Numbers)</h3>
        <p>Below is an illustrative <code>sacct</code>-style extract (pipe-delimited). Values are intentionally simple
            for
            clarity.</p>
        {% set example_raw %}
        User|JobID|JobName|Elapsed|TotalCPU|CPUTime|CPUTimeRAW|ReqTRES|AllocTRES|AveRSS|MaxRSS|TRESUsageInTot|TRESUsageOutTot|End|State|ExitCode|DerivedExitCode|ConsumedEnergyRaw|ConsumedEnergy|NodeList|AllocNodes
        alice|1001|train|02:01:00|00:00:00|0000:00:00|0|cpu=4,mem=8G,gres/gpu=1|cpu=4,mem=8G,gres/gpu=1|||||2025-09-20T12:00:00|COMPLETED|0:0|0:0|||node01|1
        |1001.batch|batch|02:01:00|00:00:10|0000:00:00|0||cpu=4,gres/gpu=1,mem=0,node=1|0K|0K||||COMPLETED|0:0|0:0|||node01|1
        |1001.0|step0|01:00:00|25:00:00|0000:00:00|0||cpu=4,gres/gpu=1,mem=0,node=1|4G|4G||||COMPLETED|0:0|0:0|||node01|1
        |1001.1|step1|01:01:00|25:00:00|0000:00:00|0||cpu=4,gres/gpu=1,mem=0,node=1|4G|4G||||COMPLETED|0:0|0:0|||node01|1
        {% endset %}

        {% set lines = example_raw.strip().splitlines() %}
        {% set rows = [] %}
        {% for line in lines %}
        {% set _ = rows.append(line.split('|')) %}
        {% endfor %}
        {% set header = rows[0] %}
        {% set body = rows[1:] %}

        <details class="raw">
            <summary>Show example raw output as a table</summary>
            <div class="table-wrap" style="margin-top:.5rem;">
                <table>
                    <thead>
                        <tr>
                            {% for h in header %}
                            <th>{{ h }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for r in body %}
                        <tr>
                            {% for cell in r %}
                            <td>{{ cell }}</td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </details>


        <p><strong>Rates (example):</strong> <code>cpu_rate = ฿1 / core-hour</code>,
            <code>gpu_rate = ฿5 / GPU-hour</code>,
            <code>mem_rate = ฿0.50 / GB-hour</code>.
        </p>
        <ol>
            <li><strong>Elapsed (parent)</strong>: <code>02:01:00</code> = 2&nbsp;h&nbsp;1&nbsp;m &rarr;
                <em>elapsed_h</em>
                = 2.0167&nbsp;h.</li>
            <li><strong>CPU_core_hours</strong>: sum step <code>TotalCPU</code> (exclude <code>.batch</code>):
                <code>25:00:00</code> + <code>25:00:00</code> = 50&nbsp;h.
            </li>
            <li><strong>GPU_hours</strong>: <code>gres/gpu=1</code> × 2.0167&nbsp;h = 2.0167&nbsp;GPU-h.</li>
            <li><strong>Memory_GB_hours_used</strong>: steps’ <code>AveRSS</code> 4&nbsp;GB each:
                <ul>
                    <li>Step0: 4&nbsp;GB × 1.00&nbsp;h = 4&nbsp;GB-h</li>
                    <li>Step1: 4&nbsp;GB × 1.0167&nbsp;h ≈ 4.0668&nbsp;GB-h</li>
                    <li>Total ≈ 8.0668&nbsp;GB-h (fallback would be 8&nbsp;GB × 2.0167&nbsp;h ≈ 16.1336&nbsp;GB-h if
                        AveRSS
                        were missing)</li>
                </ul>
            </li>
        </ol>

        <p><strong>Cost:</strong></p>
        <pre><code>CPU: 50.0000 × 1      = ฿50.00
        GPU: 2.0167 × 5        = ฿10.08
        MEM: 8.0668 × 0.50     = ฿4.03
        -----------------------------
        Total                  ≈ ฿64.11
        </code></pre>
        <h3>References</h3>
        <ol>
            <li><a href="https://slurm.schedmd.com/sacct.html" rel="noopener noreferrer">Slurm sacct(1) — command,
                    fields,
                    formats, filters</a></li>
            <li><a href="https://slurm.schedmd.com/accounting.html" rel="noopener noreferrer">Slurm Accounting —
                    configuration, privacy (<code>PrivateData</code>), usage</a></li>
            <li><a href="https://slurm.schedmd.com/tres.html" rel="noopener noreferrer">Trackable RESources (TRES) —
                    CPU,
                    memory, GPUs</a></li>
            <li><a href="https://slurm.schedmd.com/sacct.html#SECTION_OUTPUT-FIELDS" rel="noopener noreferrer">sacct
                    Output
                    Fields — definitions for <code>TotalCPU</code>, <code>AveRSS</code>, etc.</a></li>
            <li><a href="https://slurm.schedmd.com/" rel="noopener noreferrer">Slurm Official Documentation Home</a>
            </li>
        </ol>
        <!-- === your existing section content ends here === -->
    </div>
</details>

{% endblock %}
