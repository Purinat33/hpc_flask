<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>{% block title %}HPC Billing{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Favicon -->
     <!-- apple-touch-icon.png -->
      <!-- favicon-32x32.png -->
       <!-- favicon-16x16.png -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png', v='1') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png', v='1') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png', v='1') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest', v='1') }}">

    <link href="{{ url_for('static', filename='css/app.css') }}" rel="stylesheet">
    {% block extra_head %}{% endblock %}
</head>

<body>
    <div class="bg-hue" aria-hidden="true"></div>
    {% include "_nav.html" %}

    <main class="site">
        {% block content %}{% endblock %}
    </main>

    {% block extra_js %}{% endblock %}
    <!-- <script src="{{ url_for('copilot.copilot_widget_js') }}"></script> -->
<script>
(function () {
  function bindComposer(el) {
    const max = parseInt(el.getAttribute('maxlength') || el.dataset.maxlength || '0', 10) || 0;
    const counter = el.closest('form')?.querySelector(`.char-counter[data-for="${el.id}"]`);

    const adjust = () => {
      // Hard cap
      if (max && el.value.length > max) el.value = el.value.slice(0, max);
      // Auto-grow
      el.style.height = 'auto';
      el.style.height = Math.min(el.scrollHeight, window.innerHeight * 0.4) + 'px';
      // Counter
      if (counter) counter.textContent = `${el.value.length}/${max}`;
    };

    // Initial
    adjust();
    el.addEventListener('input', adjust);
  }

  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('textarea.textarea-grow').forEach(bindComposer);
  });
})();

document.addEventListener('DOMContentLoaded', function () {
  function toggleReplies(btn){
    const targetId = btn.getAttribute('data-target');
    const el = document.getElementById(targetId);
    if (!el) return;
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    // flip state
    btn.setAttribute('aria-expanded', String(!expanded));
    if (expanded) {
      el.setAttribute('hidden', '');
      btn.textContent = btn.getAttribute('data-show') || 'Show replies';
    } else {
      el.removeAttribute('hidden');
      btn.textContent = btn.getAttribute('data-hide') || 'Hide replies';
    }
  }

  document.body.addEventListener('click', function (e) {
    const btn = e.target.closest('.comment-toggle');
    if (!btn) return;
    e.preventDefault();
    toggleReplies(btn);
  });
});
</script>
</body>

</html>
